<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="./src/css/app.css">
    <script src="./lib/js/fhir-client.js"></script>
    <title>SMART on FHIR App</title>
  </head>
  <body>

    <div class="container d-flex flex-column justify-content-center align-items-center">
        <svg class="spinner" viewBox="0 0 50 50">
            <circle class="path" cx="25" cy="25" r="20" fill="none" stroke-width="5"></circle>
          </svg>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script>
        FHIR.oauth2.authorize({

            // The client_id that you should have obtained after registering a client at
            // the EHR.
            clientId: "my_web_app",

            // The scopes that you request from the EHR
            scope: [
                "launch",           // Get the launch context in EHR launch mode
                "launch/patient",   // Get the current patient in standalone launch mode
                "launch/encounter", // Get the current encounter in standalone launch mode
                "openid fhirUser",  // Get the current user
                "patient/*.read"    // Read patient data
             ].join(" "),

            // Having this option means that it makes a standalone launch. This is to make
            // this demo usable out of the box, but it can still to EHR launch if "iss" and
            // "launch" url parameters are passed.
            iss: "https://launch.smarthealthit.org/v/r3/sim/eyJoIjoiMSJ9/fhir",

            // Typically, if your redirectUri points to the root of the current directory
            // (where the launchUri is), you can omit this option because the default
            // value is ".". However, some servers (like this one) do not support directory
            // indexes so "." and "./" will not automatically map to the "index.html" file
            // in that directory.
            redirectUri: "index.html"
        });
    </script>
  </body>
</html>